const intro = note(`
g#6@4 g6@4 -!4 g#6@4 g6@4 -!4 g#6@4 g6@4
`)
.sound("triangle")
.adsr("0:0:1:0")
.hpf(800)

const synth = note(`
g#6@4 g6@4 -!4 d#7@2 -!2 g#6@4 f6@8 g#6@4,
-!8 g#5@4 f5@2 g#5@2 b5@4 -!12,
-!16 f5@4 -!12
`)
.sound("triangle")
.adsr("0:0:1:0")
.hpf(800)
.gain(16)

const noise = note("c7@32")
.sound("brown")
.hpf(500)
.gain(4)

const bass = note("f2@12 f2@6 -!2 f#2@4 -!2 f2@2 f2@4")
.sound("square")
.adsr("0:0:1:1")
.transpose(-12)
.lpf(300)
.hpf(20)
.gain(4)

const closedHihats = note(`
b2 - b2 - b2!3 - b2 - b2 - b2 - b2 - b2 - b2 - b2!3 - b2 - b2 - b2 - b2 -
`)
.sound("hh")
.bank("bossdr55")

const openHihats = note(`
c3 -!15 c3 - c3 - c3 - c3 - c3 - c3 - c3 - c3 -
`)
.sound("oh")
.bank("ace")

const claps = note(`
-!32 g2@4 -!4 g2@4 -!12 g2@4 -!4 g2!2 - g2 -!4 g2@4 -!20 g2@4 -!4 g2!2 - g2 -!20
`)
.sound("clap:0")
.crush(6)

const shot = sound("yamahatg33_bd:0").gain(16)

const tempo = 60 / 3.3

const drums = stack(
  closedHihats,
  openHihats,
  claps,
).gain(16)

const mainLoop = stack(
  synth,
  noise,
  bass,
  drums
)

main: arrange(
  [1, intro],
  [1, stack(mainLoop, shot)],
  [6, mainLoop]
).cpm(tempo)
._punchcard()

/*
...............................................
...............................................
..................@@@@@@@@@@@..................
..................@@@@@@@@@@@..................
..................@@@@@@@@@@@..................
..................@@@@@@@@@@@..................
..................@@@@@@@@@@@..................
...@..............@@@@@@@@@@@..................
...@@@@@@@........@@@@@@@@@@@:.........@@@@@...
..@@@@@@@@@@@@@:..@@@@@@@@@@@#....@@@@@@@@@@@..
.=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=
..-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.
........@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@......
..............@@@@@@@@@@@@@@@@@@@@@=...........
.............@@@@@@@@@@@@@@@@@@@@..............
............@@@@@@@@@@@@@@@@@@@@@@+............
..........@@@@@@@@@@@@@@@@@@@@@@@@@@...........
.........@@@@@@@@@@@@@@@@@@@@@@@@@@@@..........
........@@@@@@@@@@@@@@...@@@@@@@@@@@@@.........
.......@@@@@@@@@@@@@......@@@@@@@@@@@@@@.......
.....@@@@@@@@@@@@@@........@@@@@@@@@@@@@@......
.......:@@@@@@@@@#..........-@@@@@@@@@@........
..........@@@@@@..............@@@@@@@..........
.............@@................@@@.............
...............................................
...............................................
*/
